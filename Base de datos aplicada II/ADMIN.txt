-- Usuario dueño de las tablas (BDY1102_ET_FA)
CREATE USER BDY1102_ET_FA IDENTIFIED BY "Examen.T2023_FA"
DEFAULT TABLESPACE "DATA"
TEMPORARY TABLESPACE "TEMP";
ALTER USER BDY1102_ET_FA QUOTA UNLIMITED ON DATA;
GRANT CREATE SESSION TO BDY1102_ET_FA;
GRANT "RESOURCE" TO BDY1102_ET_FA;
ALTER USER BDY1102_ET_FA DEFAULT ROLE "RESOURCE";

-- Usuario desarrollador (BDY1102_ET_FA_DES)
CREATE USER BDY1102_ET_FA_DES IDENTIFIED BY "Examen.T2023_DES"
DEFAULT TABLESPACE "DATA"
TEMPORARY TABLESPACE "TEMP";
ALTER USER BDY1102_ET_FA_DES QUOTA 50M ON DATA;
GRANT CREATE SESSION TO BDY1102_ET_FA_DES;

-- Privilegios para crear y gestionar objetos
GRANT CREATE TABLE, CREATE SEQUENCE, CREATE INDEX TO BDY1102_ET_FA;
GRANT ALTER ANY TABLE, DROP ANY TABLE TO BDY1102_ET_FA;

-- Privilegios para crear vistas
GRANT CREATE VIEW, CREATE MATERIALIZED VIEW TO BDY1102_ET_FA_DES;

-- Permisos de lectura en tablas específicas
GRANT SELECT ON BDY1102_ET_FA.ANTECEDENTES_LABORALES TO BDY1102_ET_FA_DES;
GRANT SELECT ON BDY1102_ET_FA.ANTECEDENTES_PERSONALES TO BDY1102_ET_FA_DES;
GRANT SELECT ON BDY1102_ET_FA.INSTITUCION TO BDY1102_ET_FA_DES;
GRANT SELECT ON BDY1102_ET_FA.PAIS TO BDY1102_ET_FA_DES;
GRANT SELECT ON BDY1102_ET_FA.PASANTIA_PERFECCIONAMIENTO TO BDY1102_ET_FA_DES;
GRANT SELECT ON BDY1102_ET_FA.POSTULACION_PASANTIA_PERFEC TO BDY1102_ET_FA_DES;
GRANT SELECT ON BDY1102_ET_FA.PTJE_ANNOS_EXPERIENCIA TO BDY1102_ET_FA_DES;
GRANT SELECT ON BDY1102_ET_FA.PTJE_PAIS_POSTULA TO BDY1102_ET_FA_DES;
GRANT SELECT ON BDY1102_ET_FA.PTJE_PUEBLO_INDIGENA TO BDY1102_ET_FA_DES;
GRANT SELECT ON BDY1102_ET_FA.PUEBLO_INDIGENA TO BDY1102_ET_FA_DES;
GRANT SELECT ON BDY1102_ET_FA.REGION TO BDY1102_ET_FA_DES;
GRANT SELECT ON BDY1102_ET_FA.SERVICIO_LOCAL_EDUCP TO BDY1102_ET_FA_DES;

-- Permisos completos en tablas específicas
GRANT SELECT, INSERT, UPDATE, DELETE ON BDY1102_ET_FA.DETALLE_PUNTALE_POSTULACION TO BDY1102_ET_FA_DES;
GRANT SELECT, INSERT, UPDATE, DELETE ON BDY1102_ET_FA.RESULTADO_POSTULACION TO BDY1102_ET_FA_DES;

-- Creación de roles para mejor gestión
CREATE ROLE ROL_DESARROLLADOR_BECAS;

-- Asignación de privilegios al rol
GRANT CREATE VIEW, CREATE MATERIALIZED VIEW TO ROL_DESARROLLADOR_BECAS;
GRANT SELECT ON BDY1102_ET_FA.ANTECEDENTES_LABORALES TO ROL_DESARROLLADOR_BECAS;
-- [Agregar todos los demás permisos SELECT necesarios al rol]

-- Asignar el rol al usuario desarrollador
GRANT ROL_DESARROLLADOR_BECAS TO BDY1102_ET_FA_DES;